# よくある質問（FAQ）

## Q: スタバから出る時にサービスを切ったほうがいい？

**A: 切る必要はありません！**

スクリプトは**ホワイトリストに登録された WiFi に接続している時のみ**動作するように設定されています。

- ✅ **対象 WiFi**: 45 分ごとに自動再接続
- ✅ **その他の WiFi**: 自動的にスキップ（何もしない）
- ✅ **WiFi 未接続**: 自動的にスキップ

そのため、サービスは**常時実行したまま**で問題ありません。対象外の WiFi や、WiFi が切れている時は自動的にスキップされるので、不要な再接続は行われません。

---

## Q: ホワイトリストに登録されていない WiFi での挙動は？

**A: 自動的にスキップされます。**

ホワイトリストに登録されていない WiFi（自宅、オフィス、その他のカフェなど）に接続している場合：

1. スクリプトが実行される
2. WiFi 名をチェック
3. ホワイトリストに存在しないことを検出
4. **自動的にスキップ**（再接続しない）
5. ログに「ホワイトリストに登録されていません。スキップします。」と記録

**影響**: なし。対象外の WiFi では一切再接続されません。

---

## Q: どのように対象 WiFi を判定しているの？

**A: ホワイトリスト機能のみを使用しています。**

- `~/.awi-whitelist` に登録された WiFi のみが自動再接続対象
- 現在接続中の WiFi を追加するには: `awi add` コマンドを使用
- ホワイトリストが空または存在しない場合は、すべての WiFi がスキップされます

**初回使用時**: スタバなど、自動再接続したい WiFi に接続した状態で `awi add` を実行してください。

---

## Q: サービスを停止したい場合は？

**A: `awi`コマンドで簡単に制御できます。**

```bash
# サービスを停止
awi stop

# サービスを開始
awi start

# サービスを再起動
awi restart
```

直接`launchctl`を使用する場合：

```bash
# サービスを停止
launchctl unload ~/Library/LaunchAgents/com.awi.plist

# サービスを開始
launchctl load ~/Library/LaunchAgents/com.awi.plist
```

---

## Q: ログでスキップされたことを確認したい

**A: `awi log`コマンドで簡単に確認できます。**

```bash
# 最近のログを表示
awi log

# ログをリアルタイムで確認
awi log -f
```

または直接ファイルを確認：

```bash
tail -f ~/.awi.log
```

対象外の WiFi に接続している場合、以下のようなログが記録されます：

```
[2026-01-12 18:30:00] 現在のWiFi: MyHome_WiFi
[2026-01-12 18:30:00] ホワイトリストに登録されていません（MyHome_WiFi）。スキップします。
```

---

## Q: 他の WiFi でも再接続したい場合は？

**A: `awi`コマンドで簡単に追加できます！**

### 現在接続中の WiFi を追加

```bash
awi add
```

これで現在接続中の WiFi が自動再接続対象に追加されます。

### 対象 WiFi 一覧を確認

```bash
awi list
```

### WiFi を削除

```bash
awi remove "WiFi名"
```

### 手動でホワイトリストを編集

`~/.awi-whitelist` ファイルを直接編集することもできます：

```bash
# ファイルを開く
nano ~/.awi-whitelist

# 1行に1つのWiFi名を記述
# 例:
# MyHome_WiFi
# Office_Network
# at_STARBUCKS_Wi2
```

---

## Q: ホワイトリストが空の場合はどうなる？

**A: すべての WiFi がスキップされます。**

ホワイトリストが空または存在しない場合、どの WiFi にも再接続しません。これは安全のための設計です。

**初回使用時**: 自動再接続したい WiFi に接続した状態で `awi add` を実行して、ホワイトリストに追加してください。
